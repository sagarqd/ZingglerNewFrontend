import{k as a,ad as d,j as e,aS as F,v,B as m,aT as W,aU as q,C as O,ag as U,G as x,d as j,t as f,D as V,aV as H,aW as I,J as L,a4 as G}from"./index-jfPFzjbI.js";import{d as P,a as z}from"./Delete-Dg88uvtz.js";import{d as J}from"./AddCircleOutline-DZn5j3VV.js";import{T as M,a as K}from"./TableHead-DVbTPTJW.js";import{T as Q,b as T,a as X}from"./TableRow-khktxVjc.js";import{T as i}from"./TableCell-DDjLCmII.js";import{I as _}from"./IconButton-B7JpJvwz.js";const Y={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4},ie=()=>{const[D,u]=a.useState(!1),[o,g]=a.useState({_id:"",groupName:"",groupDescription:""}),[n,l]=a.useState([]),[S,E]=a.useState(!0),[c,N]=a.useState({groupName:"",groupDescription:""}),[y,k]=a.useState("");a.useEffect(()=>{B()},[]);const B=async()=>{try{const t=(await d.get("http://localhost:8080/api/groups")).data.sort((s,p)=>{const b=["Admin","Educator","Student"];return b.indexOf(s.groupName)-b.indexOf(p.groupName)});l(t),E(!1)}catch(r){console.error("Error fetching groups:",r)}},w=()=>{u(!0),g({_id:"",groupName:"",groupDescription:""}),N({groupName:"",groupDescription:""})},h=()=>{u(!1)},C=r=>{const{name:t,value:s}=r.target;g({...o,[t]:s})},R=async r=>{r.preventDefault();try{if(!o.groupName||!o.groupDescription){console.error("Group Name and Description are required");return}if(o._id){await d.put(`http://localhost:8080/api/groups/${o._id}`,{groupName:o.groupName,groupDescription:o.groupDescription});const t=n.map(s=>s._id===o._id?{...s,groupName:o.groupName,groupDescription:o.groupDescription}:s);l(t)}else{const t=await d.post("http://localhost:8080/api/groups",{groupName:o.groupName,groupDescription:o.groupDescription});l([...n,t.data])}h()}catch(t){console.error("Error saving group:",t),t.response&&k(t.response.data.message||"Server Error")}},A=r=>{g({...r}),u(!0),N({groupName:"",groupDescription:""})},$=async r=>{try{if(!n.find(p=>p._id===r)){console.error("Group not found");return}await d.delete(`http://localhost:8080/api/groups/${r}`);const s=n.filter(p=>p._id!==r);l(s)}catch(t){console.error("Error deleting group:",t)}};return S?e.jsx("p",{children:"Loading..."}):e.jsxs(F,{maxWidth:"xl",children:[e.jsx(v,{elevation:0,children:e.jsx(m,{sx:{width:"100%",marginBottom:3,textAlign:"right"},children:e.jsx(W,{separator:q,navigation,icon:!0,title:!0,rightAlign:!0})})}),e.jsxs(v,{elevation:0,children:[e.jsx(O,{children:e.jsx(U,{sx:{py:2},title:e.jsxs(x,{container:!0,spacing:3,justifyContent:"space-between",alignItems:"center",children:[e.jsx(x,{item:!0,children:e.jsx(j,{variant:"h3",children:"Group"})}),e.jsx(x,{item:!0,children:e.jsx(f,{size:"medium",variant:"outlined",color:"secondary",startIcon:e.jsx(J,{}),sx:{flexShrink:0,whiteSpace:"nowrap"},onClick:w,children:"Add New Group"})})]})})}),e.jsx(V,{}),e.jsx(M,{children:e.jsxs(Q,{children:[e.jsx(K,{children:e.jsxs(T,{children:[e.jsx(i,{style:{paddingRight:"16px"},children:"Group Name"}),e.jsx(i,{style:{paddingRight:"16px"},children:"Description"}),e.jsx(i,{style:{paddingRight:"16px"},children:"Actions"})]})}),e.jsx(X,{children:n.map(r=>e.jsxs(T,{children:[e.jsx(i,{style:{paddingRight:"16px"},children:r.groupName}),e.jsx(i,{style:{paddingRight:"16px"},children:r.groupDescription}),e.jsxs(i,{style:{paddingRight:"16px"},children:[e.jsx(_,{color:"primary",onClick:()=>A(r),children:e.jsx(P,{})}),e.jsx(_,{color:"secondary",onClick:()=>$(r._id),children:e.jsx(z,{})})]})]},r._id))})]})})]}),e.jsx(H,{open:D,onClose:h,closeAfterTransition:!0,BackdropComponent:I,BackdropProps:{timeout:500},children:e.jsx(L,{in:D,children:e.jsxs(m,{sx:Y,children:[e.jsx(j,{variant:"h6",component:"h2",children:o._id?"Edit Group":"Add New Group"}),e.jsxs("form",{onSubmit:R,children:[e.jsx(G,{fullWidth:!0,label:"Group Name",name:"groupName",value:o.groupName,onChange:C,margin:"normal",required:!0,error:!!c.groupName,helperText:c.groupName}),e.jsx(G,{fullWidth:!0,label:"Group Description",name:"groupDescription",value:o.groupDescription,onChange:C,margin:"normal",required:!0,error:!!c.groupDescription,helperText:c.groupDescription}),y&&e.jsx(j,{color:"error",variant:"body2",children:y}),e.jsxs(m,{sx:{mt:2,textAlign:"right"},children:[e.jsx(f,{variant:"outlined",onClick:h,sx:{mr:2},children:"Cancel"}),e.jsx(f,{variant:"contained",color:"secondary",type:"submit",children:o._id?"Update Group":"Add Group"})]})]})]})})})]})};export{ie as default};
