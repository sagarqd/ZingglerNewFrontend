import{k as d,w as y,j}from"./index-jfPFzjbI.js";var O={},C={},L={};Object.defineProperty(L,"__esModule",{value:!0});L.useUnityCanvasId=void 0;var J=d,K=0,X="react-unity-webgl-canvas",Y=function(e){if(e.id!==void 0)return e.id;var i=(0,J.useMemo)(function(){return[X,++K].join("-")},[]);return i};L.useUnityCanvasId=Y;var I={},w={};Object.defineProperty(w,"__esModule",{value:!0});w.UnityLoaderStatus=void 0;var P;(function(e){e.Idle="Idle",e.Loading="Loading",e.Loaded="Loaded",e.Error="Error"})(P||(w.UnityLoaderStatus=P={}));var b={};Object.defineProperty(b,"__esModule",{value:!0});b.isBrowserEnvironment=void 0;b.isBrowserEnvironment=typeof window<"u"&&typeof document<"u";var Z=y&&y.__awaiter||function(e,i,t,a){function r(n){return n instanceof t?n:new t(function(u){u(n)})}return new(t||(t=Promise))(function(n,u){function l(o){try{s(a.next(o))}catch(U){u(U)}}function v(o){try{s(a.throw(o))}catch(U){u(U)}}function s(o){o.done?n(o.value):r(o.value).then(l,v)}s((a=a.apply(e,i||[])).next())})},ee=y&&y.__generator||function(e,i){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,r,n,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(s){return function(o){return v([s,o])}}function v(s){if(a)throw new TypeError("Generator is already executing.");for(;u&&(u=0,s[0]&&(t=0)),t;)try{if(a=1,r&&(n=s[0]&2?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[s[0]&2,n.value]),s[0]){case 0:case 1:n=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,r=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!n||s[1]>n[0]&&s[1]<n[3])){t.label=s[1];break}if(s[0]===6&&t.label<n[1]){t.label=n[1],n=s;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(s);break}n[2]&&t.ops.pop(),t.trys.pop();continue}s=i.call(e,t)}catch(o){s=[6,o],r=0}finally{a=n=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(I,"__esModule",{value:!0});I.useUnityInstance=void 0;var te=d,ne=w,re=b,ae=function(e,i,t,a){(0,te.useEffect)(function(){(function(){return Z(void 0,void 0,void 0,function(){var r,n;return ee(this,function(u){switch(u.label){case 0:if(re.isBrowserEnvironment===!1)return[2];if(e!==ne.UnityLoaderStatus.Loaded||i===null)return a.setUnityInstance(null),a.setInitialisationError(null),[2];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,window.createUnityInstance(i,t,a.setLoadingProgression)];case 2:return r=u.sent(),a.setUnityInstance(r),a.setInitialisationError(null),[3,4];case 3:return n=u.sent(),a.setUnityInstance(null),a.setInitialisationError(n),[3,4];case 4:return[2]}})})})()},[e,i,t,a])};I.useUnityInstance=ae;var S={};Object.defineProperty(S,"__esModule",{value:!0});S.useUnityArguments=void 0;var se=d,ie=function(e){return(0,se.useMemo)(function(){return{dataUrl:e.unityProvider.unityConfig.dataUrl,frameworkUrl:e.unityProvider.unityConfig.frameworkUrl,codeUrl:e.unityProvider.unityConfig.codeUrl,streamingAssetsUrl:e.unityProvider.unityConfig.streamingAssetsUrl,memoryUrl:e.unityProvider.unityConfig.memoryUrl,symbolsUrl:e.unityProvider.unityConfig.symbolsUrl,companyName:e.unityProvider.unityConfig.companyName,productName:e.unityProvider.unityConfig.productName,productVersion:e.unityProvider.unityConfig.productVersion,webglContextAttributes:e.unityProvider.unityConfig.webglContextAttributes||{},cacheControl:e.unityProvider.unityConfig.cacheControl||function(){return"must-revalidate"},devicePixelRatio:e.devicePixelRatio||1,matchWebGLToCanvasSize:typeof e.matchWebGLToCanvasSize=="boolean"?e.matchWebGLToCanvasSize:!0,disabledCanvasEvents:e.disabledCanvasEvents||["contextmenu","dragstart"],print:function(i){},printErr:function(i){}}},[])};S.useUnityArguments=ie;var p={};Object.defineProperty(p,"__esModule",{value:!0});p.useUnityLoader=void 0;var R=d,ue=b,f=w,oe=function(e){var i=(0,R.useState)(f.UnityLoaderStatus.Loading),t=i[0],a=i[1];return(0,R.useEffect)(function(){if(ue.isBrowserEnvironment!==!1){if(e.loaderUrl===null){a(f.UnityLoaderStatus.Idle);return}var r=window.document.querySelector('script[src="'.concat(e.loaderUrl,'"]'));r===null?(r=window.document.createElement("script"),r.type="text/javascript",r.src=e.loaderUrl,r.async=!0,r.setAttribute("data-status","loading"),window.document.body.appendChild(r),r.addEventListener("load",function(){return r==null?void 0:r.setAttribute("data-status","loaded")}),r.addEventListener("error",function(){return r==null?void 0:r.setAttribute("data-status","error")})):a(r.getAttribute("data-status")==="loaded"?f.UnityLoaderStatus.Loaded:f.UnityLoaderStatus.Error);var n=function(u){return a(u.type==="load"?f.UnityLoaderStatus.Loaded:f.UnityLoaderStatus.Error)};return r.addEventListener("load",n),r.addEventListener("error",n),function(){r!==null&&(r.removeEventListener("load",n),r.removeEventListener("error",n),window.document.body.removeChild(r))}}},[e.loaderUrl]),t};p.useUnityLoader=oe;Object.defineProperty(C,"__esModule",{value:!0});C.Unity=void 0;var q=d,G=d,le=L,ce=I,de=S,ve=p,fe=(0,G.forwardRef)(function(e,i){var t=(0,G.useRef)(null),a=(0,le.useUnityCanvasId)(e),r=(0,de.useUnityArguments)(e),n=(0,ve.useUnityLoader)(e.unityProvider.unityConfig);return(0,ce.useUnityInstance)(n,t.current,r,e.unityProvider),(0,q.useImperativeHandle)(i,function(){return t.current}),(0,q.createElement)("canvas",{ref:t,id:a,style:e.style,className:e.className,tabIndex:e.tabIndex})});C.Unity=fe;var M={},E={};Object.defineProperty(E,"__esModule",{value:!0});E.errorMessages=void 0;var ye={genericNoUnityInstance:"No Unity Instance found.",requestFullscreenNoUnityInstance:"Unable to Set Fullscreen while Unity is not Instantiated.",requestPointerLockNoUnityInstanceOrCanvas:"Unable to Request Pointer Lock while Unity is not Instantiated or the Canvas is not found.",sendMessageNoUnityInstance:"Unable to Send Message while Unity is not Instantiated.",quitNoUnityInstance:"Unable to Quit Unity while Unity is not Instantiated.",screenshotNoUnityInstanceOrCanvas:"Unable to Take Screenshot while Unity is not Instantiated or Canvas is not available.",noEventListener:"Unable to find Event Listener in Event System for Event"};E.errorMessages=ye;var x={},$=y&&y.__spreadArray||function(e,i,t){if(t||arguments.length===2)for(var a=0,r=i.length,n;a<r;a++)(n||!(a in i))&&(n||(n=Array.prototype.slice.call(i,0,a)),n[a]=i[a]);return e.concat(n||Array.prototype.slice.call(i))};Object.defineProperty(x,"__esModule",{value:!0});x.useEventSystem=void 0;var m=d,be=E,Ue=b,h=[],_e=function(e){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];var a=void 0;return h.forEach(function(r){a=r.apply(void 0,$([e],i,!1))}),a};Ue.isBrowserEnvironment===!0&&(window.dispatchReactUnityEvent=_e);var me=function(){var e=(0,m.useRef)([]),i=(0,m.useCallback)(function(r,n){e.current=$($([],e.current,!0),[{eventName:r,callback:n}],!1)},[e]),t=(0,m.useCallback)(function(r,n){e.current=e.current.filter(function(u){return u.eventName!==r&&u.callback!==n})},[e]),a=(0,m.useCallback)(function(r){for(var n=[],u=1;u<arguments.length;u++)n[u-1]=arguments[u];var l=e.current.find(function(v){return v.eventName===r});if(typeof l>"u"){console.warn(be.errorMessages.noEventListener,{eventName:r});return}return l.callback.apply(l,n)},[e]);return(0,m.useEffect)(function(){return h.push(a),function(){h.splice(h.indexOf(a),1)}},[a]),{addEventListener:i,removeEventListener:t}};x.useEventSystem=me;var k={};Object.defineProperty(k,"__esModule",{value:!0});k.useNullableState=void 0;var ge=d,we=function(e){return(0,ge.useState)(e||null)};k.useNullableState=we;Object.defineProperty(M,"__esModule",{value:!0});M.useUnityContext=void 0;var c=d,g=E,Ee=x,F=k,he=function(e){var i=(0,F.useNullableState)(),t=i[0],a=i[1],r=(0,c.useState)(0),n=r[0],u=r[1],l=(0,c.useState)(!1),v=l[0],s=l[1],o=(0,F.useNullableState)(),U=o[0],W=o[1],A=(0,Ee.useEventSystem)(),B=(0,c.useRef)({setLoadingProgression:u,setInitialisationError:W,setUnityInstance:a,setIsLoaded:s,unityConfig:e}),T=(0,c.useCallback)(function(_){if(t===null){console.warn(g.errorMessages.requestFullscreenNoUnityInstance);return}t.SetFullscreen(_===!0?1:0)},[t]),z=(0,c.useCallback)(function(){if(t===null||typeof t.Module.canvas>"u"){console.warn(g.errorMessages.requestPointerLockNoUnityInstanceOrCanvas);return}return t.Module.canvas.requestPointerLock()},[t]),V=(0,c.useCallback)(function(_,N,H){if(t===null){console.warn(g.errorMessages.sendMessageNoUnityInstance);return}t.SendMessage(_,N,H)},[t]),D=(0,c.useCallback)(function(_,N){if(t===null||typeof t.Module.canvas>"u"){console.warn(g.errorMessages.screenshotNoUnityInstanceOrCanvas);return}return t.Module.canvas.toDataURL(_,N)},[t]),Q=(0,c.useCallback)(function(){return t===null?(console.warn(g.errorMessages.quitNoUnityInstance),Promise.reject()):t.Quit()},[t]);return(0,c.useEffect)(function(){s(n===1)},[n]),{unityProvider:B.current,loadingProgression:n,initialisationError:U,isLoaded:v,UNSAFE__unityInstance:t,requestFullscreen:T,requestPointerLock:z,sendMessage:V,unload:Q,takeScreenshot:D,addEventListener:A.addEventListener,removeEventListener:A.removeEventListener}};M.useUnityContext=he;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.useUnityContext=e.Unity=void 0;var i=C;Object.defineProperty(e,"Unity",{enumerable:!0,get:function(){return i.Unity}});var t=M;Object.defineProperty(e,"useUnityContext",{enumerable:!0,get:function(){return t.useUnityContext}})})(O);const Le=()=>{const{unityProvider:e,loadingProgression:i}=O.useUnityContext({loaderUrl:"build/webgl/ExportWebGl.loader.js",dataUrl:"build/webgl/ExportWebGl.data.unityweb",frameworkUrl:"build/webgl/ExportWebGl.framework.js.unityweb",codeUrl:"build/webgl/ExportWebGl.wasm.unityweb"});return j.jsxs("div",{children:[i!==1&&j.jsxs("h1",{children:["Loading... ",Math.round(i*100)," %"]}),j.jsx(O.Unity,{unityProvider:e,style:{width:"100%",height:"100vh"}})]})};export{Le as default};
