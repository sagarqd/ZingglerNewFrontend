import{k as i,a0 as C,j as e,aS as E,ae as S,G as n,C as O,B as P,S as f,d as o,a4 as T,t as d,D as b,ad as p}from"./index-jfPFzjbI.js";import{L as k}from"./Link-n2lUMppv.js";const A=()=>{const[a,j]=i.useState(Array(6).fill("")),[h,u]=i.useState(""),[c,x]=i.useState(10),m=C(),l=i.useRef([]);i.useEffect(()=>{if(c>0){const r=setInterval(()=>{x(t=>t>0?t-1:0)},1e3);return()=>clearInterval(r)}},[c]);const y=async()=>{try{const r=localStorage.getItem("email");if(!r)throw new Error("Email not found in localStorage");if((await p.post("http://localhost:8080/api/verify-otp",{email:r,otp:a.join("")})).status===200)console.log("OTP verified successfully"),m("/reset-password");else throw new Error("Failed to verify OTP")}catch(r){console.error("Error verifying OTP:",r),u("Failed to verify OTP. Please try again.")}},g=async()=>{try{const r=localStorage.getItem("email");if(!r)throw new Error("Email not found in localStorage");const t=await p.post("http://localhost:8080/api/resend-otp",{email:r});console.log("OTP resent successfully:",t.data),x(10)}catch(r){console.error("Error resending OTP:",r),u("Failed to resend OTP. Please try again.")}},v=(r,t)=>{if(/^[0-9]$/.test(t)||t===""){const s=[...a];s[r]=t,j(s),t&&r<5&&l.current[r+1].focus()}},w=()=>{m("/email-recovery")};return e.jsxs(E,{maxWidth:"lg",sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column","@media (max-width: 600px)":{justifyContent:"center"}},children:[e.jsx(k,{"aria-label":"theme logo",href:"/pages/code-verification/code-verification1",sx:{mb:4},children:e.jsx(S,{})}),e.jsx(n,{container:!0,spacing:2,justifyContent:"center",children:e.jsx(n,{item:!0,xs:12,md:6,lg:7,children:e.jsx(O,{elevation:3,sx:{p:4,boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.2)"},children:e.jsx(P,{children:e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(n,{container:!0,direction:"row",alignItems:"center",justifyContent:"space-between",children:e.jsx(n,{item:!0,children:e.jsxs(f,{spacing:2,children:[e.jsx(o,{variant:"h2",gutterBottom:!0,children:"Recovery Email verification code"}),e.jsx(o,{variant:"h4",gutterBottom:!0,children:"Enter OTP"}),e.jsx(o,{variant:"caption",children:"Weâ€™ve sent you a code on jone.****@company.com"})]})})})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(n,{container:!0,spacing:1,children:a.map((r,t)=>e.jsx(n,{item:!0,xs:2,children:e.jsx(T,{"aria-label":`Character ${t+1}`,type:"text",autoComplete:"off",inputProps:{maxLength:1,style:{textAlign:"center"}},value:r,onChange:s=>v(t,s.target.value),onKeyDown:s=>{s.key==="Backspace"&&!a[t]&&t>0&&l.current[t-1].focus()},inputRef:s=>l.current[t]=s})},t))})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(d,{variant:"contained",color:"secondary",fullWidth:!0,size:"large",onClick:y,children:"Verify Email Address"})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(f,{direction:"row",justifyContent:"center",children:e.jsx(o,{variant:"h5",children:"Did not receive the email? Check your spam folder"})})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(b,{})}),e.jsx(n,{item:!0,xs:12,children:e.jsxs(o,{variant:"h5",color:"secondary",textAlign:"center",children:["Code will be Resent in 00:",c.toString().padStart(2,"0"),"s"]})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(d,{variant:"outlined",color:"secondary",fullWidth:!0,size:"large",onClick:g,disabled:c>0,children:"Resend Code"})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(d,{variant:"text",color:"secondary",fullWidth:!0,size:"large",onClick:w,children:"Try Another Way"})}),h&&e.jsx(n,{item:!0,xs:12,children:e.jsx(o,{variant:"body2",color:"error",children:h})})]})})})})})]})};export{A as default};
