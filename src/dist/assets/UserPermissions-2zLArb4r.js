import{k as n,ad as m,j as e,aS as D,v as u,B as h,aT as R,aU as B,C as U,ag as _,G as l,d as N,D as P,ar as f}from"./index-jfPFzjbI.js";import{d as k,a as z}from"./Delete-Dg88uvtz.js";import{T as G,a as O}from"./TableHead-DVbTPTJW.js";import{T as w,b as j,a as H}from"./TableRow-khktxVjc.js";import{T as o}from"./TableCell-DDjLCmII.js";import{I as g}from"./IconButton-B7JpJvwz.js";const I=["Read","Write","Edit","Delete","View","Manage","Create","Update","Archive","Publish","Unpublish","Approve","Reject","Submit","Review","Assign","Unassign","Schedule","Reschedule","Export","Import","Upload","Download","Synchronize","Analyze","Monitor","Configure","Customize","Audit","Debug","Optimize","Backup","Restore","Reset","Test","Deploy"],K=()=>{const[L,y]=n.useState(!1),[c,C]=n.useState({_id:"",groupName:"",permissions:[]}),[a,d]=n.useState([]),[b,S]=n.useState(!0),[M,A]=n.useState({groupName:""});n.useState(""),n.useEffect(()=>{T()},[]);const T=async()=>{try{const r=(await m.get("http://localhost:8080/api/groups")).data.sort((t,i)=>{const x=["Admin","Educator","Student"];return x.indexOf(t.groupName)-x.indexOf(i.groupName)});d(r),S(!1)}catch(s){console.error("Error fetching groups:",s)}},p=Array.isArray(c.permissions)?c.permissions:[];I.sort((s,r)=>{const t=p.includes(s),i=p.includes(r);return t&&!i?-1:!t&&i?1:0});const E=s=>{C({...s,permissions:s.permissions||[]}),y(!0),A({groupName:""})},v=async s=>{try{if(!a.find(i=>i._id===s)){console.error("Group not found");return}await m.delete(`http://localhost:8080/api/groups/${s}`);const t=a.filter(i=>i._id!==s);d(t)}catch(r){console.error("Error deleting group:",r)}};return b?e.jsx("p",{children:"Loading..."}):e.jsxs(D,{maxWidth:"xl",children:[e.jsx(u,{elevation:0,children:e.jsx(h,{sx:{width:"100%",marginBottom:3,textAlign:"right"},children:e.jsx(R,{separator:B,navigation,icon:!0,title:!0,rightAlign:!0})})}),e.jsxs(u,{elevation:0,children:[e.jsx(U,{children:e.jsx(_,{sx:{px:5},title:e.jsxs(l,{container:!0,spacing:3,justifyContent:"space-between",alignItems:"center",children:[e.jsx(l,{item:!0,children:e.jsx(N,{variant:"h3",children:"User Permissions Management "})}),e.jsx(l,{item:!0})]})})}),e.jsx(P,{}),e.jsx(G,{children:e.jsxs(w,{children:[e.jsx(O,{children:e.jsxs(j,{children:[e.jsx(o,{sx:{px:5},children:" User Permissions"}),e.jsx(o,{children:"Permissions"}),e.jsx(o,{sx:{px:5,display:"flex",justifyContent:"flex-end"},children:"Actions"})]})}),e.jsx(H,{children:a.map(s=>e.jsxs(j,{children:[e.jsx(o,{sx:{px:5},children:s.groupName}),e.jsx(o,{children:Array.isArray(s.permissions)?s.permissions.map((r,t)=>e.jsx(f,{label:r,sx:{margin:"2px",fontSize:"0.75rem"}},t)):typeof s.permissions=="string"?s.permissions.split(",").map((r,t)=>e.jsx(f,{label:r.trim(),sx:{margin:"2px",fontSize:"0.75rem"}},t)):"No permissions"}),e.jsx(o,{sx:{px:5,display:"flex",justifyContent:"flex-end",minHeight:"64px",alignItems:"center"},children:e.jsxs(h,{sx:{display:"flex",gap:1},children:[e.jsx(g,{color:"primary",onClick:()=>E(s),children:e.jsx(k,{})}),e.jsx(g,{color:"secondary",onClick:()=>v(s._id),children:e.jsx(z,{})})]})})]},s._id))})]})})]})]})};export{K as default};
