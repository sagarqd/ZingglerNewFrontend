import{k as a,a0 as g,j as e,aS as p,ae as y,G as t,C as f,B as v,S as E,d as n,a4 as b,t as x,D as w,ad as S}from"./index-jfPFzjbI.js";import{L as C}from"./Link-n2lUMppv.js";const I=()=>{const[s,u]=a.useState(""),[i,m]=a.useState(""),[o,T]=a.useState(""),[l,c]=a.useState(10),h=g();a.useEffect(()=>{if(l>0){const r=setInterval(()=>{c(d=>d>0?d-1:0)},1e3);return()=>clearInterval(r)}},[l]);const j=async()=>{try{if(!s)throw new Error("Please enter a valid email address.");if((await S.post("http://localhost:8080/api/forgot-password",{email:s})).status===200)console.log("OTP sent successfully"),c(10),localStorage.setItem("email",s),h("/recovery-email-verify");else throw new Error("Failed to send OTP")}catch(r){console.error("Error sending OTP:",r),m("Failed to send OTP. Please try again.")}};return e.jsxs(p,{maxWidth:"lg",sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column","@media (max-width: 600px)":{justifyContent:"center"}},children:[e.jsx(C,{"aria-label":"theme logo",href:"/pages/forgot-password",sx:{mb:4},children:e.jsx(y,{})}),e.jsx(t,{container:!0,spacing:2,justifyContent:"center",children:e.jsx(t,{item:!0,xs:12,md:6,lg:7,children:e.jsx(f,{elevation:3,sx:{p:4,boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.2)"},children:e.jsx(v,{children:e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(t,{container:!0,direction:"column",alignItems:"center",justifyContent:"space-between",children:e.jsx(t,{item:!0,sx:{mt:4},children:e.jsxs(E,{spacing:2,alignItems:"center",textAlign:"center",children:[e.jsx(n,{variant:"h2",gutterBottom:!0,children:"Try another way!"}),e.jsxs(n,{variant:"h5",gutterBottom:!0,children:["Your Recovery Email Account is ",s]})]})})})}),e.jsxs(t,{item:!0,xs:12,sx:{mt:4},children:[e.jsx(n,{variant:"body1",gutterBottom:!0,sx:{mb:2},children:"Enter Your Recovery Email Account :"}),e.jsx(b,{label:"Email Address",type:"email",fullWidth:!0,variant:"outlined",value:s,onChange:r=>u(r.target.value)})]}),e.jsx(t,{item:!0,xs:12,sx:{mb:2},children:e.jsx(x,{variant:"contained",color:"secondary",fullWidth:!0,size:"large",onClick:j,children:"Send OTP"})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(w,{})}),e.jsx(t,{item:!0,xs:12,sx:{mt:2,mb:4},children:e.jsx(x,{variant:"outlined",color:"secondary",fullWidth:!0,size:"large",children:"Go Back"})}),o&&e.jsx(t,{item:!0,xs:12,children:e.jsx(n,{variant:"body2",color:"success.main",children:o})}),i&&e.jsx(t,{item:!0,xs:12,children:e.jsx(n,{variant:"body2",color:"error",children:i})})]})})})})})]})};export{I as default};
