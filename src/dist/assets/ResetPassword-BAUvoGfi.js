import{k as a,a0 as P,j as e,aS as v,ae as y,G as s,C as b,B as C,S,d as o,a4 as x,a9 as u,t as B,ad as E}from"./index-jfPFzjbI.js";import{d as h}from"./Visibility-KP81lIWL.js";import{d as m}from"./VisibilityOff-93xk6HZ1.js";import{L as I}from"./Link-n2lUMppv.js";import{I as p}from"./IconButton-B7JpJvwz.js";const L=()=>{const[n,w]=a.useState(""),[i,g]=a.useState(""),[r,d]=a.useState(!1),[l,c]=a.useState(""),j=P(),f=async()=>{if(n!==i){c("Passwords do not match.");return}try{const t=localStorage.getItem("email");if(!t)throw new Error("Email or OTP not found in localStorage");if((await E.post("http://localhost:8080/api/reset-password",{email:t,newPassword:n,confirmPassword:i},{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})).status===200)console.log("Password reset successfully"),j("/login");else throw new Error("Failed to reset password")}catch(t){console.error("Error resetting password:",t),c("Failed to reset password. Please try again.")}};return e.jsxs(v,{maxWidth:"lg",sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column","@media (max-width: 600px)":{justifyContent:"center"}},children:[e.jsx(I,{"aria-label":"theme logo",href:"/pages/forgot-password",sx:{mb:4},children:e.jsx(y,{})}),e.jsx(s,{container:!0,spacing:2,justifyContent:"center",children:e.jsx(s,{item:!0,xs:12,md:6,lg:7,children:e.jsx(b,{elevation:3,sx:{p:4,boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.2)"},children:e.jsx(C,{children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:12,children:e.jsx(s,{container:!0,children:e.jsx(s,{item:!0,sx:{mt:4},children:e.jsxs(S,{spacing:2,children:[e.jsx(o,{variant:"h2",gutterBottom:!0,children:"Reset Password"}),e.jsx(o,{variant:"body1",gutterBottom:!0,children:"Enter New Password to Update Your Password"})]})})})}),e.jsxs(s,{item:!0,xs:12,sx:{mt:2},children:[e.jsx(o,{variant:"h5",gutterBottom:!0,sx:{mb:2},children:"Enter New Password:"}),e.jsx(x,{label:"New Password",type:r?"text":"password",fullWidth:!0,variant:"outlined",value:n,onChange:t=>w(t.target.value),InputProps:{endAdornment:e.jsx(u,{position:"end",children:e.jsx(p,{"aria-label":"toggle password visibility",onClick:()=>d(!r),edge:"end",children:r?e.jsx(m,{}):e.jsx(h,{})})})}})]}),e.jsxs(s,{item:!0,xs:12,sx:{mt:2},children:[e.jsx(o,{variant:"h5",gutterBottom:!0,sx:{mb:2},children:"Confirm New Password:"}),e.jsx(x,{label:"Confirm New Password",type:r?"text":"password",fullWidth:!0,variant:"outlined",value:i,onChange:t=>g(t.target.value),InputProps:{endAdornment:e.jsx(u,{position:"end",children:e.jsx(p,{"aria-label":"toggle password visibility",onClick:()=>d(!r),edge:"end",children:r?e.jsx(m,{}):e.jsx(h,{})})})}})]}),e.jsx(s,{item:!0,xs:12,sx:{mb:4,mt:2},children:e.jsx(B,{variant:"contained",color:"secondary",fullWidth:!0,size:"large",onClick:f,children:"Continue"})}),l&&e.jsx(s,{item:!0,xs:12,children:e.jsx(o,{variant:"body2",color:"error",children:l})})]})})})})})]})};export{L as default};
