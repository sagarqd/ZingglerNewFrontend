import{r as N,i as W,j as e,k as a,a0 as re,aS as ne,v as V,B as r,aT as oe,aU as ie,d as i,t as B,a7 as le,a9 as ce,e as R,h as c,aN as T,G as P,C as de,b7 as xe,A as l,c as ue,ab as he,ad as z}from"./index-jfPFzjbI.js";import{d as pe,b as L,a as U,h as D,A as me}from"./moment-DJ7VX0My.js";import{d as fe}from"./AddCircleOutline-DZn5j3VV.js";import{d as ge,a as je}from"./Delete-Dg88uvtz.js";import{I as F}from"./IconButton-B7JpJvwz.js";import{B as Ce}from"./Badge-CgMlzXjQ.js";var p={},ve=W;Object.defineProperty(p,"__esModule",{value:!0});var G=p.default=void 0,be=ve(N()),ye=e;G=p.default=(0,be.default)((0,ye.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");var m={},we=W;Object.defineProperty(m,"__esModule",{value:!0});var O=m.default=void 0,Se=we(N()),ke=e;O=m.default=(0,Se.default)((0,ke.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");const Le=()=>{const[_e,q]=a.useState(!1),[d,f]=a.useState([]),[Ie,H]=a.useState({title:"",description:"",thumbnail:"",videoUrl:""}),[X,Me]=a.useState(""),[g,j]=a.useState(null),[x,C]=a.useState(null),[Ae,v]=a.useState(!1),[Ee,J]=a.useState(null),[K,Q]=a.useState("grid"),[b,y]=a.useState(null),u=re();a.useEffect(()=>{(async()=>{v(!0);try{console.log("Fetching courses...");const n=(await z.get("http://localhost:8080/api/courses/")).data.filter(o=>o.status!=="draft");f(n),console.log("Courses fetched:",n)}catch(t){J(t),console.error("Error fetching courses:",t)}finally{v(!1)}})()},[]);const Y=()=>{u("/courses/new-course"),q(!0),H({title:"",description:"",thumbnail:"",videoUrl:""})};(d||[]).filter(s=>{var t,n,o;return s.status!=="draft"&&((o=(n=(t=s.general)==null?void 0:t.advanceSettings)==null?void 0:n.downloadCourse)==null?void 0:o.toLowerCase().includes(X.toLowerCase()))});const Z=(s,t)=>{j(s.currentTarget),C(t)},w=()=>{j(null),C(null)},ee=s=>{u(`/courses/${s.slug}/general`)},se=async()=>{if(x){try{await z.delete(`http://localhost:8080/api/courses/${x._id}`),f(d.filter(s=>s._id!==x._id))}catch(s){console.error("Error deleting course:",s)}w()}},te=s=>{y(s.currentTarget)},S=()=>{y(null)},k=s=>{Q(s),S(),u(s==="grid"?"/courses/course-grid":"/courses/course-list")};return e.jsxs(ne,{maxWidth:"xl",children:[e.jsx(V,{elevation:0,children:e.jsx(r,{sx:{width:"100%",marginBottom:3,textAlign:"right"},children:e.jsx(oe,{separator:ie,icon:!0,title:!0,rightAlign:!0})})}),e.jsx(V,{elevation:0,sx:{backgroundColor:"transparent",marginBottom:3},children:e.jsxs(r,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"h2",sx:{mb:{xs:2,sm:0}},children:"All Courses"}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2}},children:[e.jsx(B,{color:"secondary",size:"medium",variant:"outlined",startIcon:e.jsx(fe,{}),sx:{flexShrink:0,whiteSpace:"nowrap"},onClick:Y,children:"Add New Course"}),e.jsx(le,{fullWidth:!0,variant:"outlined",placeholder:"Search",size:"small",startAdornment:e.jsx(ce,{position:"start",children:e.jsx(pe,{})}),sx:{marginTop:{xs:1,sm:0},marginLeft:{xs:0,sm:2},maxWidth:{xs:"100%",sm:300}}}),e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(F,{onClick:te,sx:{color:"secondary"},children:K==="grid"?e.jsx(L,{}):e.jsx(U,{})}),e.jsxs(R,{anchorEl:b,open:!!b,onClose:S,PaperProps:{sx:{width:"200px",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.1)"}},children:[e.jsxs(c,{onClick:()=>k("grid"),children:[e.jsx(T,{children:e.jsx(L,{})}),"Grid View"]}),e.jsxs(c,{onClick:()=>k("list"),children:[e.jsx(T,{children:e.jsx(U,{})}),"List View"]})]})]})]})]})}),e.jsx(P,{container:!0,spacing:3,children:d.map(s=>{var _,I,M,A,E,$;const t=s.updatedAt,n=D(t).isValid()?D(t).fromNow():"Invalid date",o=s.numStudents||0,ae=(I=(_=s.description)==null?void 0:_.thumbnail)!=null&&I.courseThumbnail?`http://localhost:8080${s.description.thumbnail.courseThumbnail}`:"";return e.jsx(P,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(de,{children:[e.jsxs(r,{position:"relative",children:[e.jsx(xe,{component:"img",height:"200",image:ae,alt:s.title,onError:h=>h.target.src="default-thumbnail.png"}),e.jsxs(r,{position:"absolute",top:12,left:20,right:20,display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"4px",padding:"2px 4px",children:[e.jsx(i,{variant:"body2",color:"white",sx:{padding:"6px 16px",bgcolor:"rgba(0, 0, 0, 0.5)",borderRadius:"4px"},children:"3 Hours"}),e.jsx(F,{onClick:h=>Z(h,s),sx:{color:"secondary"},children:e.jsx(O,{})}),e.jsxs(R,{anchorEl:g,open:!!g,onClose:w,PaperProps:{sx:{width:"200px",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.1)"}},children:[e.jsxs(c,{onClick:()=>ee(s),children:[e.jsx(ge,{sx:{marginRight:1}}),"Edit"]}),e.jsxs(c,{onClick:se,children:[e.jsx(je,{sx:{marginRight:1}}),"Delete"]})]})]})]}),e.jsx(r,{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",mt:-4,mb:1,sx:{height:56},children:e.jsx(Ce,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:e.jsx(G,{sx:{fontSize:14,color:"#fff"}}),sx:{position:"absolute",right:40,bottom:0,"& .MuiBadge-badge":{padding:"0",border:"1px solid #fff",backgroundColor:"#44b700",borderRadius:"50%"}},children:e.jsx(l,{alt:"User 1",src:"/assets/profile-CXNf4CWk.png",sx:{width:56,height:56}})})}),e.jsxs(ue,{sx:{paddingTop:0},children:[e.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontSize:"14px",fontFamily:"Poppins, sans-serif"},children:(A=(M=s.general)==null?void 0:M.courseInformation)==null?void 0:A.teacherName}),e.jsx(i,{variant:"h6",component:"div",sx:{fontSize:"16px",fontFamily:"Poppins, sans-serif",mt:1},children:($=(E=s.general)==null?void 0:E.courseInformation)==null?void 0:$.courseFullName}),e.jsxs(r,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mt:1,fontFamily:"Poppins, sans-serif",fontSize:"12px"},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontSize:"12px",fontFamily:"Poppins, sans-serif"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:o}),"+ Enrolled"]}),e.jsx(i,{variant:"body2",color:"text.secondary",children:n})]}),e.jsxs(r,{display:"flex",alignItems:"center",justifyContent:"space-between",sx:{mt:2},children:[e.jsxs(me,{max:4,sx:{"& .MuiAvatar-root":{width:24,height:24,fontSize:"0.75rem"}},children:[e.jsx(l,{alt:"Remy Sharp",src:"/static/images/avatar/1.jpg"}),e.jsx(l,{alt:"Travis Howard",src:"/static/images/avatar/2.jpg"}),e.jsx(l,{alt:"Cindy Baker",src:"/static/images/avatar/3.jpg"}),e.jsx(l,{alt:"Agnes Walker",src:"/static/images/avatar/4.jpg"}),e.jsx(l,{alt:"Trevor Henderson",src:"/static/images/avatar/5.jpg"})]}),e.jsx(B,{variant:"contained",color:"secondary",component:he,to:`/courses/${s.slug}`,children:"View Course"})]})]})]})},s._id)})})]})};export{Le as default};
